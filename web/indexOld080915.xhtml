<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>АО «Единый регистратор ценных бумаг»</title>
    <link rel="shortcut icon" href="#{resource['default/img/favicon.ico']}" type="image/x-icon" />

    <script type="text/javascript">
        <!--
        function showImage(){

            document.getElementById('gif1').style.visibility='visible';
            document.getElementById('inf_not').style.visibility='hidden';
        }
        function hideImage(){

            document.getElementById('gif1').style.visibility='hidden';
            document.getElementById('inf_not').style.visibility='visible';
        }
        -->

    </script>

    <script type="text/javascript">
        PrimeFaces.locales ['ru'] = {
            closeText: 'Закрыть',
            prevText: 'Назад',
            nextText: 'Вперёд',
            monthNames: ['Январь', 'Февраль' , 'Март' , 'Апрель' , 'Май' , 'Июнь' , 'Июль' , 'Август' , 'Сентябрь','Октябрь','Ноябрь','Декабрь' ],
            monthNamesShort: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек' ],
            dayNames: ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Субота'],
            dayNamesShort: ['Воск','Пон' , 'Вт' , 'Ср' , 'Четв' , 'Пят' , 'Суб'],
            dayNamesMin: ['В', 'П', 'Вт', 'С ', 'Ч', 'П ', 'Сб'],
            weekHeader: 'Неделя',
            firstDay: 1,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix:'',
            timeOnlyTitle: 'Только время',
            timeText: 'Время',
            hourText: 'Час',
            minuteText: 'Минута',
            secondText: 'Секунда',
            currentText: 'Сегодня',
            ampm: false,
            month: 'Месяц',
            week: 'неделя',
            day: 'День',
            allDayText: 'Весь день'
        };
    </script>




</h:head>
<h:body>


    <f:facet name="last">
        <h:outputStylesheet library="default" name="css/index.css" />
    </f:facet>


    <h:panelGrid>
    <div class="headertisr">
        <div class="logotisr"></div>

        <div class="line1tisr"></div>

    </div>

    </h:panelGrid>


    <h:form>

        <p:growl id="msgs" showDetail="true" />



            <h:panelGrid columns="2" cellpadding="10" styleClass="indHeadTitle" >
                <h:outputText value="Информационная площадка по внебиржевым сделкам по ЦБ ">
                </h:outputText>

            </h:panelGrid>





        <h:panelGrid id="grid" columns="2" cellspacing="20" border="0" styleClass="indTwoFrame">

            <h:outputText value=" #{userData.display_inf_last_od}"
                          styleClass="indLastOD"
                          style="#{userData.display_inf_not2}"
                    />


            <h:panelGrid columns="2" cellpadding="4" styleClass="indBodyTitleOD">

                <p:outputLabel for="button" value=" По состоянию #{userData.display_inf_od} " styleClass="indLabOD"/>
                <p:calendar locale="ru" id="button" value="#{calendarView.date10}"
                            showOn="button"
                            navigator="true"
                            pattern="dd/MM/yyyy"
                            />



                <p:commandButton id="submitButton" value="Получить информацию " update="@form"
                                 action="#{userData.upd(calendarView.date10)}"
                                 onclick="showImage()" oncomplete="hideImage()"
                                 styleClass="indButnOD"
                        />



            </h:panelGrid>




            <h:panelGrid columns="2" cellpadding="4" styleClass="indBodyTitleOD2">


                <p:outputLabel for="button" value=" По состоянию с " styleClass="indLabOD2"/>
                <p:calendar locale="ru" id="button2" value="#{calendarView2.date10}"
                            showOn="button"
                            navigator="true"
                            pattern="dd/MM/yyyy"
                        />

                <p:outputLabel for="button" value="_____________ по " styleClass="indLabOD2"/>
                <p:calendar locale="ru" id="button3" value="#{calendarView2.date10}"
                            showOn="button"
                            navigator="true"
                            pattern="dd/MM/yyyy"
                        />

                <p:commandButton id="submitButton2" value="Получить информацию " update="@form"
                                 action="#{userData.upd(calendarView2.date10)}"
                                 onclick="showImage()" oncomplete="hideImage()"
                                 styleClass="indButnOD2"
                        />



            </h:panelGrid>




        </h:panelGrid>



        <div id="gif1" style="visibility:hidden"><p:graphicImage library="default" name="img/mailbox_new.gif" /></div>



            <p:dialog modal="true" resizable="false" header="Values" widgetVar="dlg" showEffect="fold">
                <p:panelGrid id="display" columns="2" columnClasses="label,value">

                    <h:outputText value="Button:" />
                    <h:outputText value="#{calendarView.date3}">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText>

                </p:panelGrid>
            </p:dialog>



        <div id="inf_period" style="#{userData.display_inf_cnt}" >
            <h:outputText value=" По состоянию #{userData.display_inf_od} #{calendarView.date10}" styleClass="indInfNotTitle">
                <f:convertDateTime pattern="MM/dd/yyyy" />
            </h:outputText>

        </div>


        <div id="inf_not" style="#{userData.display_inf_not}" >
            <h:outputText value="ИНФОРМАЦИЯ НА УКАЗАННУЮ ДАТУ ОТСУТСТВУЕТ " styleClass="indInfNotTitle">
            </h:outputText>

        </div>

        <div id="inf_cnt" style="#{userData.display_inf_cnt}">
             <h:outputText value=" выбрано #{userData.tisr_non_markets.size()} записей " styleClass="indInfNotTitle">
             </h:outputText>
        </div>



            <p:dataTable id="tbl" value="#{userData.tisr_non_markets}" var="tisr_non_market"
                         style="#{userData.display}" styleClass="indPag"
                         paginatorTemplate="{Exporters}"
                         paginator="true">


                <f:facet name="{Exporters}">
                    <h:commandLink>
                        <p:graphicImage library="default" name="img/xls.png"/>
                        <p:dataExporter type="xls" target="tbl" fileName="exportXLS" pageOnly="true"/>
                    </h:commandLink>
                </f:facet>


                <p:column sortBy="#{tisr_non_market.order_date}">
                    <f:facet name="header">
                        <h:outputText value="Дата и время сделки" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.order_date}" styleClass="indTblBody"/>
                </p:column>



                <p:column sortBy="#{tisr_non_market.p3_emitent_name_str}" filterBy="#{tisr_non_market.p3_emitent_name_str}"
                          filterMatchMode="contains"  styleClass="indTblBodyEmit">
                    <f:facet name="header">
                        <h:outputText value="Наименование эмитента" styleClass="indTblHead"/>
                    </f:facet>



                    <p:link target="_blank" title="View Detail" id="clnCard2"
                            outcome="clientV" value="#{tisr_non_market.p3_emitent_name_str}">
                        <f:param name="client_id" value="#{tisr_non_market.client_id}" />
                    </p:link>



                </p:column>

                <p:column>
                    <f:facet name="header">
                        <h:outputText value=" БИН эмитента" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText styleClass="indTblBodyEmit" value="#{tisr_non_market.bin}" />
                </p:column>

                <p:column sortBy="#{tisr_non_market.s18_name}" filterBy="#{tisr_non_market.s18_name}"
                          filterMatchMode="startsWith">
                    <f:facet name="header">
                        <h:outputText value="Вид ценных бумаг" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.s18_name}" styleClass="indTblBody"/>
                </p:column>

                <p:column sortBy="#{tisr_non_market.p3_nsin}" filterBy="#{tisr_non_market.p3_nsin}"
                          filterMatchMode="contains">
                    <f:facet name="header">
                        <h:outputText value="НИН ценных бумаг" styleClass="indTblHead"/>
                    </f:facet>


                    <p:link target="_blank" title="View Detail" id="btnNin2"
                            outcome="ninV" value="#{tisr_non_market.p3_nsin}">
                        <f:param name="nin_id" value="#{tisr_non_market.p3_nsin}" />
                    </p:link>


                </p:column>



                <p:column sortBy="#{tisr_non_market.prod_code}"  filterBy="#{tisr_non_market.prod_code}"
                          filterMatchMode="startsWith">
                    <f:facet name="header">
                        <h:outputText value="Продавец" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.prod_code}" styleClass="indTblBody"/>
                </p:column>



                <p:column sortBy="#{tisr_non_market.pokup_code}" filterBy="#{tisr_non_market.pokup_code}"
                          filterMatchMode="startsWith">
                    <f:facet name="header">
                        <h:outputText value="Покупатель" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.pokup_code}" styleClass="indTblBody"/>
                </p:column>

                <p:column sortBy="#{tisr_non_market.p3_volume}" styleClass="indTblBodyNum">
                    <f:facet name="header">
                        <h:outputText value="Количество ценных бумаг, шт." styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.p3_volume}" styleClass="indTblBodyNum">

                    </h:outputText>
                </p:column>

                <p:column sortBy="#{tisr_non_market.p3_price}" styleClass="indTblBodyNum">
                    <f:facet name="header">
                        <h:outputText value="Стоимость за одну ценную бумагу в сделке, тенге" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.p3_price}" styleClass="indTblBodyNum"/>
                </p:column>

                <p:column sortBy="#{tisr_non_market.p3_deal_cost}" styleClass="indTblBodyNum">
                    <f:facet name="header">
                        <h:outputText value="Объем сделки, тенге" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="#{tisr_non_market.p3_deal_cost}" styleClass="indTblBodyNum"/>
                </p:column>


                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Источник сведений" styleClass="indTblHead"/>
                    </f:facet>
                    <h:outputText value="Учетная система" styleClass="indTblBody"/>
                </p:column>

            </p:dataTable>



    </h:form>

</h:body>



</html>
